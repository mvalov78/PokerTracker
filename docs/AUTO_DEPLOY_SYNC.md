# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è webhook –ø—Ä–∏ –¥–µ–ø–ª–æ–µ

**–î–∞—Ç–∞:** 16 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** v1.3.3

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –¥–µ–ø–ª–æ—è –Ω–∞ Vercel –Ω—É–∂–Ω–æ –±—ã–ª–æ –≤—Ä—É—á–Ω—É—é:
1. –û—Ç–∫—Ä—ã–≤–∞—Ç—å `/admin/bot`
2. –ù–∞–∂–∏–º–∞—Ç—å "‚öôÔ∏è –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∑ .env"
3. –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç–∞—Ç—É—Å

–≠—Ç–æ –Ω–µ—É–¥–æ–±–Ω–æ –∏ –º–æ–∂–Ω–æ –∑–∞–±—ã—Ç—å.

## –†–µ—à–µ–Ω–∏–µ

–°–æ–∑–¥–∞–Ω **GitHub Action** –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –ø—É—à–∞ –≤ `main`
- ‚úÖ –ñ–¥–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–µ–ø–ª–æ—è –Ω–∞ Vercel (90 —Å–µ–∫—É–Ω–¥)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç `POST /api/bot/init`
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç webhook –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è `BOT_WEBHOOK_URL`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å –∏ –≤—ã–≤–æ–¥–∏—Ç –æ—Ç—á–µ—Ç
- ‚úÖ –ü–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π –µ—Å–ª–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

```mermaid
graph LR
    A[git push main] --> B[Vercel Deploy]
    B --> C[GitHub Action]
    C --> D[–ñ–¥–µ—Ç 90 —Å–µ–∫]
    D --> E[POST /api/bot/init]
    E --> F[Webhook —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω]
    F --> G[–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞]
```

### –§–∞–π–ª workflow

`.github/workflows/deploy-and-init-bot.yml`

```yaml
on:
  push:
    branches: [main]
  workflow_dispatch: # –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é
```

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç

1. **–ñ–¥–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–µ–ø–ª–æ—è** (90 —Å–µ–∫—É–Ω–¥)
2. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç webhook:**
   ```bash
   curl -X POST https://poker-tracker-ashy.vercel.app/api/bot/init
   ```
3. **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - ‚úÖ Webhook URL —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `BOT_WEBHOOK_URL`
   - ‚úÖ `pending_update_count` = 0
   - ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

–ü—Ä–æ—Å—Ç–æ –¥–µ–ª–∞–π—Ç–µ `git push main` - –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

```bash
git add .
git commit -m "feat: some changes"
git push origin main

# 1. Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ø–ª–æ–∏—Ç (2-3 –º–∏–Ω—É—Ç—ã)
# 2. GitHub Action –∂–¥–µ—Ç 90 —Å–µ–∫—É–Ω–¥
# 3. GitHub Action —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç webhook
# 4. –ì–æ—Ç–æ–≤–æ! ‚úÖ
```

### –†—É—á–Ω–æ–π —Ä–µ–∂–∏–º

–ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é –≤ GitHub:

1. –û—Ç–∫—Ä–æ–π—Ç–µ GitHub ‚Üí Actions
2. –í—ã–±–µ—Ä–∏—Ç–µ "Auto-sync Bot Webhook After Deploy"
3. –ù–∞–∂–º–∏—Ç–µ "Run workflow"
4. –í—ã–±–µ—Ä–∏—Ç–µ –≤–µ—Ç–∫—É `main`
5. –ù–∞–∂–º–∏—Ç–µ "Run workflow"

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –ø—É—à–∞:

1. –û—Ç–∫—Ä–æ–π—Ç–µ GitHub ‚Üí Actions
2. –ù–∞–π–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–ø—É—Å–∫ "Auto-sync Bot Webhook After Deploy"
3. –û—Ç–∫—Ä–æ–π—Ç–µ –ª–æ–≥

**–í—ã —É–≤–∏–¥–∏—Ç–µ:**
```
‚è≥ –ñ–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–µ–ø–ª–æ—è –Ω–∞ Vercel...
‚úÖ –î–µ–ø–ª–æ–π –¥–æ–ª–∂–µ–Ω –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è
üîó –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º webhook –∏–∑ BOT_WEBHOOK_URL...
‚úÖ Webhook —É—Å–ø–µ—à–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω!
üìã –†–µ–∂–∏–º: webhook
üîó Webhook URL: https://poker-tracker-ashy.vercel.app/api/telegram/webhook
üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å webhook...
‚úÖ –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!
```

## –ö–æ–≥–¥–∞ —ç—Ç–æ –ø–æ–ª–µ–∑–Ω–æ

### 1. –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –¥–µ–ø–ª–æ–∏
–ö–∞–∂–¥—ã–π —Ä–∞–∑ –ø–æ—Å–ª–µ –ø—É—à–∞ webhook –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è.

### 2. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `BOT_WEBHOOK_URL` –≤ Vercel:
1. –°–¥–µ–ª–∞–π—Ç–µ –ª—é–±–æ–π –∫–æ–º–º–∏—Ç
2. –ü—É—à–Ω–∏—Ç–µ –≤ `main`
3. Webhook –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç—Å—è

### 3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ—à–∏–±–æ–∫
–ï—Å–ª–∏ webhook —Å–±–∏–ª—Å—è:
1. –ü—É—à–Ω–∏—Ç–µ –ª—é–±–æ–π –∫–æ–º–º–∏—Ç
2. GitHub Action –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π webhook

### 4. –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –¥–µ–ø–ª–æ–µ–≤
–ï—Å–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç–µ—Å—å –º–µ–∂–¥—É `poker-tracker-ashy` –∏ `poker-tracker-eight`:
1. –û–±–Ω–æ–≤–∏—Ç–µ `BOT_WEBHOOK_URL` –≤ Vercel
2. –ü—É—à–Ω–∏—Ç–µ –∫–æ–º–º–∏—Ç
3. Webhook –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç—Å—è

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - –ù–µ –Ω—É–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å –æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏  
‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –í—Å–µ–≥–¥–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π webhook –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è  
‚úÖ **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –õ–æ–≥–∏ –≤ GitHub Actions  
‚úÖ **–ö–æ–Ω—Ç—Ä–æ–ª—å** - –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é  
‚úÖ **CI/CD** - –ß–∞—Å—Ç—å –ø–∞–π–ø–ª–∞–π–Ω–∞ –¥–µ–ø–ª–æ—è  

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. ‚úÖ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub
2. ‚úÖ Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ø–ª–æ–∏—Ç –∏–∑ `main`
3. ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `BOT_WEBHOOK_URL` –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –≤ Vercel
4. ‚úÖ GitHub Actions –≤–∫–ª—é—á–µ–Ω—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞

1. **GitHub Actions –≤–∫–ª—é—á–µ–Ω—ã:**
   - Settings ‚Üí Actions ‚Üí General
   - Allow all actions and reusable workflows

2. **Vercel –∞–≤—Ç–æ–¥–µ–ø–ª–æ–π –Ω–∞—Å—Ç—Ä–æ–µ–Ω:**
   - Vercel Dashboard ‚Üí Project Settings ‚Üí Git
   - Production Branch: `main`

3. **–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```bash
   BOT_WEBHOOK_URL=https://poker-tracker-ashy.vercel.app/api/telegram/webhook
   ```

## Troubleshooting

### Action –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
```
‚ùå –û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ webhook
–û—à–∏–±–∫–∞: Failed to set webhook: ...
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `BOT_WEBHOOK_URL` –≤ Vercel
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ endpoint `/api/telegram/webhook` –¥–æ—Å—Ç—É–ø–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `TELEGRAM_BOT_TOKEN`

### Webhook –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. De–ø–ª–æ–π –Ω–∞ Vercel –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ
2. GitHub Action –∑–∞–ø—É—Å—Ç–∏–ª—Å—è (GitHub ‚Üí Actions)
3. –õ–æ–≥–∏ GitHub Action –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ—à–∏–±–æ–∫
4. 90 —Å–µ–∫—É–Ω–¥ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –¥–µ–ø–ª–æ—è (–æ–±—ã—á–Ω–æ –¥–∞)

### –ù—É–∂–Ω–æ –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –¥–µ–ø–ª–æ—è

–ï—Å–ª–∏ –¥–µ–ø–ª–æ–π –∑–∞–Ω–∏–º–∞–µ—Ç –±–æ–ª—å—à–µ 90 —Å–µ–∫—É–Ω–¥, —É–≤–µ–ª–∏—á—å—Ç–µ:

```yaml
- name: Wait for Vercel deployment
  run: sleep 120  # –£–≤–µ–ª–∏—á–∏—Ç—å –¥–æ 120 —Å–µ–∫—É–Ω–¥
```

## –†—É—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é:

### –ß–µ—Ä–µ–∑ UI
```
https://poker-tracker-ashy.vercel.app/admin/bot
‚Üí –ù–∞–∂–∞—Ç—å "‚öôÔ∏è –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∑ .env"
```

### –ß–µ—Ä–µ–∑ curl
```bash
curl -X POST https://poker-tracker-ashy.vercel.app/api/bot/init
```

### –ß–µ—Ä–µ–∑ GitHub Actions
```
GitHub ‚Üí Actions ‚Üí "Auto-sync Bot Webhook After Deploy" ‚Üí Run workflow
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
curl https://poker-tracker-ashy.vercel.app/api/bot/init | jq '.recommendation'
```

–î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å:
```
"‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook –≤ Telegram
```bash
curl https://api.telegram.org/bot<TOKEN>/getWebhookInfo | jq '.result.url'
```

–î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å:
```
"https://poker-tracker-ashy.vercel.app/api/telegram/webhook"
```

## –ò—Å—Ç–æ—Ä–∏—è

### v1.3.3 - 16 –æ–∫—Ç—è–±—Ä—è 2025
- ‚úÖ –°–æ–∑–¥–∞–Ω GitHub Action –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- ‚úÖ Webhook —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –¥–µ–ø–ª–æ—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è AUTO_DEPLOY_SYNC.md

### v1.3.2 - 16 –æ–∫—Ç—è–±—Ä—è 2025
- ‚úÖ –°–æ–∑–¥–∞–Ω `/api/bot/init` endpoint
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∑ .env"

### v1.3.1 - 16 –æ–∫—Ç—è–±—Ä—è 2025
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω webhook —Ä–µ–∂–∏–º
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. ‚úÖ –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `git push main` –¥–ª—è –¥–µ–ø–ª–æ—è
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ GitHub Actions –ø–æ—Å–ª–µ –ø—É—à–∞
3. ‚úÖ –ï—Å–ª–∏ webhook —Å–±–∏–ª—Å—è - –ø—Ä–æ—Å—Ç–æ –ø—É—à–Ω–∏—Ç–µ –∫–æ–º–º–∏—Ç
4. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/admin/bot` –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
5. ‚úÖ –ù–µ –∏–∑–º–µ–Ω—è–π—Ç–µ webhook –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ Telegram API

---

**–ê–≤—Ç–æ—Ä:** AI Assistant  
**–î–∞—Ç–∞:** 16 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

