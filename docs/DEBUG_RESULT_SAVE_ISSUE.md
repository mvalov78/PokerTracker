# üîç –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç—É—Ä–Ω–∏—Ä–∞

**–î–∞—Ç–∞:** 1 –Ω–æ—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.4.9 (debug)  
**–ü—Ä–æ–±–ª–µ–º–∞:** –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç—É—Ä–Ω–∏—Ä–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –Ω–æ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### –°–∏–º–ø—Ç–æ–º—ã
1. ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç `/result` –≤ Telegram –±–æ—Ç–µ
2. ‚úÖ –í—ã–±–∏—Ä–∞–µ—Ç —Ç—É—Ä–Ω–∏—Ä –∏–∑ —Å–ø–∏—Å–∫–∞
3. ‚úÖ –í–≤–æ–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç: "16 - 0"
4. ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ "‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ–±–∞–≤–ª–µ–Ω!" —Å –¥–µ—Ç–∞–ª—è–º–∏:
   - üèÜ –ú–µ—Å—Ç–æ: 16
   - üí∞ –í—ã–∏–≥—Ä—ã—à: $0
   - üìà ROI: -100.0%
   - üíµ –ü—Ä–∏–±—ã–ª—å: -$275
5. ‚ùå –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –≤—ã–∑–æ–≤–µ `/result` —Ç—É—Ä–Ω–∏—Ä —Å–Ω–æ–≤–∞ –≤ —Å–ø–∏—Å–∫–µ –±–µ–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (—Ñ–æ—Ä–º–∞—Ç "15 - 0" —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç)
- ‚úÖ API –∑–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ –ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### –ß—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ùå –†–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É `tournament_results`
- ‚ùå –¢—É—Ä–Ω–∏—Ä –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

## üîç –î–æ–±–∞–≤–ª–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –í API route `/api/tournaments/[id]` (PUT –º–µ—Ç–æ–¥):

**1. –í—Ö–æ–¥—è—â–∏–µ –¥–∞–Ω–Ω—ã–µ:**
```
[API PUT] –ü–æ–ª—É—á–µ–Ω –∑–∞–ø—Ä–æ—Å –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–∞: {tournamentId}
[API PUT] –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞: {JSON body}
[API PUT] Admin client —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ
```

**2. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:**
```
[API] –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –¥–ª—è —Ç—É—Ä–Ω–∏—Ä–∞: {tournamentId}
[API] –î–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞: {result data}
[API] –¢—É—Ä–Ω–∏—Ä –Ω–∞–π–¥–µ–Ω: {tournament info}
[API] –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: {finalResultData}
```

**3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î:**
```
[API] –†–µ–∑—É–ª—å—Ç–∞—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω: {upsertedResult}
```

**4. –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ —Ç—É—Ä–Ω–∏—Ä–∞:**
```
[API] –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ —Ç—É—Ä–Ω–∏—Ä–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏...
[API] –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ç—É—Ä–Ω–∏—Ä –ø–æ–ª—É—á–µ–Ω: {tournament with result info}
[API PUT] –í–æ–∑–≤—Ä–∞—â–∞–µ–º —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç
```

**5. –û—à–∏–±–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å):**
```
[API] –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç—É—Ä–Ω–∏—Ä–∞: {error}
[API] –û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞: {error}
[API] –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏: {detailed error}
```

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –®–∞–≥ 1: –î–æ–∂–¥–∏—Ç–µ—Å—å –¥–µ–ø–ª–æ—è
- Vercel –¥–æ–ª–∂–µ–Ω –∑–∞–≤–µ—Ä—à–∏—Ç—å –¥–µ–ø–ª–æ–π (~2-3 –º–∏–Ω—É—Ç—ã –ø–æ—Å–ª–µ push)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –Ω–∞ https://vercel.com

### –®–∞–≥ 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –±–æ—Ç–∞
1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –±–æ—Ç–∞
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/result`
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ç—É—Ä–Ω–∏—Ä
4. –í–≤–µ–¥–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `16 - 0`
5. –î–æ–∂–¥–∏—Ç–µ—Å—å –æ—Ç–≤–µ—Ç–∞ –±–æ—Ç–∞

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

**–ì–¥–µ —Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏:**

#### Option 1: Vercel Dashboard
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://vercel.com
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç PokerTracker
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "Logs" –∏–ª–∏ "Runtime Logs"
4. –ù–∞–π–¥–∏—Ç–µ –ª–æ–≥–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `[API PUT]` –∏ `[API]`

#### Option 2: –ß–µ—Ä–µ–∑ Vercel CLI
```bash
vercel logs
```

#### Option 3: Real-time –ª–æ–≥–∏
```bash
vercel logs --follow
```

### –®–∞–≥ 4: –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤

**–ò—â–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ª–æ–≥–∏:**

```
[API PUT] –ü–æ–ª—É—á–µ–Ω –∑–∞–ø—Ä–æ—Å –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–∞: {id}
[API PUT] –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞: { "result": { "position": 16, "payout": 0, ... } }
[API PUT] Admin client —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ
[API] –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –¥–ª—è —Ç—É—Ä–Ω–∏—Ä–∞: {id}
[API] –¢—É—Ä–Ω–∏—Ä –Ω–∞–π–¥–µ–Ω: { id: "...", buyin: 275 }
[API] –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: { tournament_id: "...", position: 16, ... }
[API] –†–µ–∑—É–ª—å—Ç–∞—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω: [...]
[API] –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ç—É—Ä–Ω–∏—Ä –ø–æ–ª—É—á–µ–Ω: { id: "...", has_result: true, result_count: 1 }
```

## üîé –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã

### 1. Admin Client –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è
**–ü—Ä–∏–∑–Ω–∞–∫–∏:**
```
[API PUT] Admin client –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω!
```

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `SUPABASE_SERVICE_ROLE_KEY` –≤ Vercel environment variables
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫–ª—é—á –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π

### 2. –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç—É—Ä–Ω–∏—Ä–∞
**–ü—Ä–∏–∑–Ω–∞–∫–∏:**
```
[API] –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç—É—Ä–Ω–∏—Ä–∞: {...}
```

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ç—É—Ä–Ω–∏—Ä —Å —Ç–∞–∫–∏–º ID
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –≤ Supabase

### 3. –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
**–ü—Ä–∏–∑–Ω–∞–∫–∏:**
```
[API] –û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞: {...}
[API] –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏: {...}
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç –∑–∞–ø–∏—Å—å
- Constraint violation (—É–∂–µ –µ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç)
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è `tournament_results`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å constraint –Ω–∞ `tournament_id` (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å UNIQUE)

### 4. –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –Ω–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è
**–ü—Ä–∏–∑–Ω–∞–∫–∏:**
```
[API] –†–µ–∑—É–ª—å—Ç–∞—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω: [...]
[API] –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ç—É—Ä–Ω–∏—Ä –ø–æ–ª—É—á–µ–Ω: { has_result: false, result_count: 0 }
```

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å SELECT –∑–∞–ø—Ä–æ—Å (join —Å `tournament_results`)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è SELECT

## üìä –û–∂–∏–¥–∞–µ–º—ã–π –ø–æ—Ç–æ–∫ –ª–æ–≥–æ–≤

**–£—Å–ø–µ—à–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:**

```
1. [API PUT] –ü–æ–ª—É—á–µ–Ω –∑–∞–ø—Ä–æ—Å –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–∞: abc-123
2. [API PUT] –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞: { "result": { "position": 16, "payout": 0, "notes": "..." } }
3. [API PUT] Admin client —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ
4. [API] –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –¥–ª—è —Ç—É—Ä–Ω–∏—Ä–∞: abc-123
5. [API] –î–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞: { position: 16, payout: 0, notes: "..." }
6. [API] –¢—É—Ä–Ω–∏—Ä –Ω–∞–π–¥–µ–Ω: { id: "abc-123", buyin: 275 }
7. [API] –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: { tournament_id: "abc-123", position: 16, payout: 0, profit: -275, roi: -100, ... }
8. [API] –†–µ–∑—É–ª—å—Ç–∞—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω: [{ id: "...", tournament_id: "abc-123", position: 16, ... }]
9. [API] –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ —Ç—É—Ä–Ω–∏—Ä–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏...
10. [API] –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ç—É—Ä–Ω–∏—Ä –ø–æ–ª—É—á–µ–Ω: { id: "abc-123", name: "Test2", has_result: true, result_count: 1 }
11. [API PUT] –í–æ–∑–≤—Ä–∞—â–∞–µ–º —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç
```

## üõ†Ô∏è –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –ª–æ–≥–æ–≤:

1. **–ï—Å–ª–∏ admin client –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel
   - –î–æ–±–∞–≤–∏—Ç—å `SUPABASE_SERVICE_ROLE_KEY`

2. **–ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∞ RLS:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª–∏—Ç–∏–∫–∏ –≤ Supabase Dashboard
   - –í–æ–∑–º–æ–∂–Ω–æ, –Ω—É–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å RLS –¥–ª—è admin client

3. **–ï—Å–ª–∏ constraint violation:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–µ—Ç –ª–∏ —É–∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –¥–ª—è —Ç—É—Ä–Ω–∏—Ä–∞
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å UNIQUE constraint –Ω–∞ `tournament_id`

4. **–ï—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å SELECT –∑–∞–ø—Ä–æ—Å —Å JOIN
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è SELECT

## üìù –û—Ç—á–µ—Ç –æ–± –æ—à–∏–±–∫–µ

–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ:

1. **–°–∫—Ä–∏–Ω—à–æ—Ç –æ—Ç–≤–µ—Ç–∞ –±–æ—Ç–∞** (–∫–∞–∫ –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —Å–∫—Ä–∏–Ω—à–æ—Ç–µ)
2. **–õ–æ–≥–∏ –∏–∑ Vercel** (–≤—Å–µ —Å—Ç—Ä–æ–∫–∏ —Å `[API PUT]` –∏ `[API]`)
3. **–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ `/result`** (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ª–∏ —Ç—É—Ä–Ω–∏—Ä —Å–Ω–æ–≤–∞)

---

**–°—Ç–∞—Ç—É—Å:** üîç DEBUG MODE  
**–í–µ—Ä—Å–∏—è:** 1.4.9 (—Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º)  
**Deployed:** –û–∂–∏–¥–∞–µ—Ç –¥–µ–ø–ª–æ—è –Ω–∞ Vercel

