# üö® –≠–ö–°–¢–†–ï–ù–ù–´–ô –ü–ê–¢–ß v1.2.8 - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ hardcoded URLs –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

**–î–∞—Ç–∞ —Ä–µ–ª–∏–∑–∞:** 12 —Å–µ–Ω—Ç—è–±—Ä—è 2025  
**–¢–∏–ø:** –ü–∞—Ç—á (Bug Fix)  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–ù–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç—É—Ä–Ω–∏—Ä–æ–≤ —á–µ—Ä–µ–∑ Telegram –±–æ—Ç –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞:
```
Error: connect ECONNREFUSED 127.0.0.1:3000
```

–ü—Ä–∏—á–∏–Ω–∞: –í –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å hardcoded URL `http://localhost:3000/api/...` –≤–º–µ—Å—Ç–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö URL –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞.

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### **1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã hardcoded URLs –≤ `src/bot/commands.ts`:**
- ‚úÖ `addResult()` - –º–µ—Ç–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç—É—Ä–Ω–∏—Ä–∞
- ‚úÖ `updateResult()` - –º–µ—Ç–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤  
- ‚úÖ `getStats()` - –º–µ—Ç–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- ‚úÖ `listTournaments()` - –º–µ—Ç–æ–¥ —Å–ø–∏—Å–∫–∞ —Ç—É—Ä–Ω–∏—Ä–æ–≤
- ‚úÖ `finalizeTournamentEdit()` - –º–µ—Ç–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è —Ç—É—Ä–Ω–∏—Ä–∞ –ø–æ—Å–ª–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### **2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã hardcoded URLs –≤ `src/bot/handlers/photoHandler.ts`:**
- ‚úÖ `confirmTournament()` - –º–µ—Ç–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è —Ç—É—Ä–Ω–∏—Ä–∞ –∏–∑ OCR –¥–∞–Ω–Ω—ã—Ö

### **3. –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- üîç –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ URL –¥–ª—è –∫–∞–∂–¥–æ–≥–æ API –∑–∞–ø—Ä–æ—Å–∞
- üìä –î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ API —Å –∫–æ–¥–∞–º–∏ —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### **–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```typescript
const apiResponse = await fetch('http://localhost:3000/api/tournaments', {
```

### **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```typescript
const appUrl = process.env.NEXT_PUBLIC_APP_URL || 'https://pokertracker-pro.vercel.app'
const apiUrl = `${appUrl}/api/tournaments`
console.log('üåê [method] API URL:', apiUrl)
const apiResponse = await fetch(apiUrl, {
```

## üìã –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----------|-----------|
| `src/bot/commands.ts` | 5 URL –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π + –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | –í—Å–µ –º–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç—ã —Å —Ç—É—Ä–Ω–∏—Ä–∞–º–∏ |
| `src/bot/handlers/photoHandler.ts` | 1 URL –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ + –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | –°–æ–∑–¥–∞–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–æ–≤ –∏–∑ —Ñ–æ—Ç–æ |

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- ‚úÖ `npm run build` - —Å–±–æ—Ä–∫–∞ –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–Ω—Ç–µ—Ä–∞ - –æ—à–∏–±–æ–∫ –Ω–µ—Ç

### **–ü—Ä–æ–¥–∞–∫—à–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- üîÑ –°–æ–∑–¥–∞–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–∞ —á–µ—Ä–µ–∑ —Ñ–æ—Ç–æ –≤ –±–æ—Ç–µ
- üîÑ –ö–æ–º–∞–Ω–¥—ã `/result`, `/stats`, `/tournaments` 
- üîÑ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–æ–≤

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### **1. –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:**
```bash
git add .
git commit -m "fix: Replace hardcoded localhost URLs with dynamic URLs"
npm version patch  # v1.2.8
git push origin main --tags
```

### **2. Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–≤–µ—Ä–Ω–µ—Ç:**
- URL: https://pokertracker-pro.vercel.app
- –í—Ä–µ–º—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è: ~2-3 –º–∏–Ω—É—Ç—ã

### **3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:**
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ —Ç—É—Ä–Ω–∏—Ä–∞ –±–æ—Ç—É
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Vercel –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ `ECONNREFUSED`

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### **‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚ùå `Error: connect ECONNREFUSED 127.0.0.1:3000`
- ‚ùå `fetch failed` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç—É—Ä–Ω–∏—Ä–æ–≤
- ‚ùå –ó–∞–≤–∏—Å–∞–Ω–∏–µ –±–æ—Ç–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∫–æ–º–∞–Ω–¥

### **‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ:**
- üîç –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ API –∑–∞–ø—Ä–æ—Å–æ–≤
- üåê –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ URL –¥–ª—è –≤—Å–µ—Ö —Å—Ä–µ–¥
- üìä –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### **–õ–æ–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ Vercel:**
```javascript
// –£—Å–ø–µ—à–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:
üåê [method] API URL: https://pokertracker-pro.vercel.app/api/tournaments
‚úÖ [method] API response: { success: true, tournament: {...} }

// –û—à–∏–±–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å):
‚ùå [method] API error: { status: 500, error: "..." }
```

## üéØ –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å –ø–∞—Ç—á–∞

**–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô** - –ë–µ–∑ —ç—Ç–æ–≥–æ –ø–∞—Ç—á–∞:
- Telegram –±–æ—Ç –Ω–µ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç—É—Ä–Ω–∏—Ä—ã –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞ —Å API –≤—ã–∑–æ–≤–∞–º–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç –æ—à–∏–±–∫–∏ "–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç—É—Ä–Ω–∏—Ä–∞"

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è v1.2.8 –ø—Ä–æ–±–ª–µ–º—ã –æ—Å—Ç–∞—é—Ç—Å—è:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è Vercel:**
   - `NEXT_PUBLIC_APP_URL` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `https://pokertracker-pro.vercel.app`

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Vercel:**
   - –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏ `üåê [method] API URL: ...`
   - –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `ECONNREFUSED 127.0.0.1:3000`

3. **–û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à Vercel:**
   - Redeploy –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–¥–∞

---

**–ü–∞—Ç—á v1.2.8 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã Telegram –±–æ—Ç–∞ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ!** üöÄ
